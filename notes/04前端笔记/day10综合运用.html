jquery综合应用


1.幻灯片的制作
2.json数据格式及ajax(网络请求)


1.轮播器:(天天生鲜)


	四张图片相对定位，父元素设置absolute，四张图片是叠加放在一起的


	1.获取相应操作的标签对象

	
	2.根据图片的个数动态添加小圆点
		(要把之前的小圆点d代码注释了,后面动态添加)


	2.1for循环拼接li标签
		注:这里一次加4个内容,就不要用append这样添加节点的方式了,要使用for循环来拼接,

	2.2把拼接好的所有li标签塞入到装小圆点的列表中
		$points.html(sPiontLi);

	2.3默认第0个小圆点显示高亮
		$points.children().eq(0).addClass('active'); 或者下面写法:
		$points.children(':first').addClass('active');

	3.动画移动前的准备:
		$lis.not(':first').css({'left':760});

	4.点击小点 进行图片切换
	$points.delegate('li','click',function () {})
		4.1让当前点击的小圆点高亮,其他变灰

		4.2点击对应小圆点显示对应图片
	
		4.3移动动画的调用()  --动画函数在外面设置
			fnMoveAnimation();
	
	5.给左边按钮添加点击事件  回到上一张(即显示前面一张)
		解决越界的极端情况


	5.2给右边按钮添加点击事件  切换到下一张(后面一张)
		同上


	


	xx.动画函数

	function fnMoveAnimation() {


	}



3.json:
	简介:
	JSON是 JavaScript Object Notation 的首字母缩写，
	单词的意思是JavaScript对象表示法，这里说的JSON指的是
	类似于JavaScript对象的一种数据格式，目前这种数据格式比较流行，
	逐渐替换掉了传统的XML数据格式


	json中对象的写法:
		var oMan = {
			name:'tom',
			age:16,
			talk:function(s){
				alert('你好啊'+s);
			}
		}
		注:json中对象是用JavaScript


	json格式: {"name":"tom",
		"age":18}  只能是双引号!最后一个不能写逗号

	另一种格式:数组
		["tom",18,"programmer"]


	注:请求的数据类型有xml 和json两种类型,
	相同的包用xml写 比用json写数据要大很多,所以xml正在被取代


4.ajax 和jsonp

	$.ajax使用方法:

	常用参数：

		1、url 请求地址
		2、type 请求方式，默认是'GET'，常用的还有'POST'
		3、dataType 设置返回的数据格式，常用的是'json'格式，也可以设置为'html'
		4、data 设置发送给服务器的数据
		5、success 设置请求成功后的回调函数
		6、error 设置请求失败后的回调函数
		7、async 设置是否异步，默认值是'true'，表示异步

	新的写法(推荐):

		$.ajax({
        url: 'js/data.json',
        type: 'GET',
        dataType: 'json',
        data:{'aa':1}
    	})
    	.done(function(data) {    //请求数据成功时回调的函数
       		 alert(data.name);
   		 })
   		 .fail(function() {       //请求失败时回调函数
       		 alert('服务器超时，请重试！');
   		 });
        
    	/data.json里面的数据： {"name":"tom","age":18}



	开启服务器,点击登录,向服务器发送请求,服务站在本地js文件中获取并给出数据



	跨域请求:
		默认是失败的,因为不同源
		会出现无法访问提示

	解决方案:
		jsonp跨域请求:
			利用script里的标签可以跨域连接资源的特性,src=''


	注:ajax请求需要在浏览器中访问数据,所以打开网页的方式应该是:localhost:8000

------------------------------------------------------------
拓展:

	1.同步和异步


	2.局部刷新和无刷新
	

	3.同源策略

		同源:
		源(origin),即URL:
		协议protocol,域名host,路径port

		同源:协议,域名,端口这三个部分相同

-------------------------------------------------------------




	



5.360跨域请求:
	
	导入js,





	百度跨域请求:
		里面没有回调,需要我们自动配置回调



 同域请求是请求的json类型
 跨域请求的是js类型

----------------------------------------------------

课件:

14- ajax天天生鲜局部刷新

	准备好要请求的JSON数据
	请求后先验证数据，再写功能代码

	具体流程:
		天天生鲜默认是未登录状态,即登录的用户名称是隐藏不显示的,
		用ajax请求数据,让登录名显示(并且用事先准备好的json数据替换掉之前的写的默认登录名)
		ajax也要导入jQuery文件,在HTML文件中写入ajax代码,将自己写的简单的服务器文件
		server.js放在与html同一个文件下夹,运行服务器server,运行方法:cd 把无刷新整个文件夹拖过去cmd
		dir查看当前文件夹里所有文件,node server.js-->服务器开启成功!

		然后优化ajax代码: 文档准备,将html里'登录'添加点击事件,将ajax代码放在点击事件的回调函数里
		当点击登录时ajax代码向服务器请求数据,注意:a标签默认是href=''的时候默认是网页刷新的,取消刷新,需要将
		里面写成#,不刷新,这样就能实现ajax的局部刷新,




15- jsonp的原理

	ajax只能请求同一个域下的数据或资源，
	有时候需要跨域请求数据，就需要用到jsonp技术，
	jsonp可以跨域请求数据，它的原理主要是利用了script标签
	可以跨域链接资源的特性。jsonp和ajax原理完全不一样，不过
	jQuery将它们封装成同一个函数。

	ajax技术的目的是让JavaScript发送http请求,与后台通信,获取数据和信息,
		ajax技术的原理是实例化xmlhttp对象,使用此对象与后台通信.
		ajax通信的过程不会影响后续JavaScript的执行,从而实现异步.


	同步和异步:
		现实生活中,同步指的是同时做几件事情,异步是做完一件事再做另外一件事,
		程序中的同步和异步和生活中的概念刚好相反,也就是程序中的异步值得是同步,
		程序中的同步指的是异步.

	局部刷新和无刷新:
		ajax可以实现局部刷新,也叫无刷新,无刷新值得是整个页面不刷新,只是局部刷新,
		ajax可以自己发送http请求,不用通过浏览器的地址栏,所以页面整体不会刷新,
		ajax获取到后台数据,更新页面显示的数据的部分,就做到了局部刷新!!
	

	同源策略:
		ajax请求的页面或资源只能是同一个域下面的资源,不能是其他域的资源,是出于安全的考虑

		跨域请求特性性报错:
			...NO Access-Control-Allow-Origin...





	注:ajax默认是同源请求,原因是出于安全!


16- jsonp 跨域请求

	

	跨域请求场景:
		1.当调用一个现有的API或公开API
		2.前后端分离



	$.ajax({
	    url:'js/data.js',
	    type:'get',
	    dataType:'jsonp',     //注:这里变成jsonp就可以实现跨域了,因为jQuery封装了函数的缘故
	    jsonpCallback:'fnBack'
	})
	.done(function(data){
	    alert(data.name);
	})
	.fail(function() {
	    alert('服务器超时，请重试！');
	});

	// data.js里面的数据： fnBack({"name":"tom","age":18});


17- 仿360搜索

	 $(function(){
	    $('#txt01').keyup(function(){
	        var sVal = $(this).val();
	        $.ajax({
	            url:'https://sug.so.360.cn/suggest',
	            type:'get',
	            dataType:'jsonp',
	            //给服务器传递参数
	            data: {word: sVal}
	        })
	        .done(function(data){
	            var aData = data.s;
	            $('.list').empty();
	            for(var i=0;i<aData.length;i++)
	            {
	                var $li = $('<li>'+ aData[i] +'</li>');
	                $li.appendTo($('.list'));
	            }
	        })        
	    })
	})



































































































































































































